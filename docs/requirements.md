# Mu 要件定義 v0.4（MVP確定）

## 1. 性能ターゲットの達成環境（固定）

**性能要件（起動2秒 / メモリ上限）を満たすべき基準環境**を次で固定します。

- OS：**Windows 11**
- CPU：**Core i5 世代**
- RAM：**16GB**

### 補足（他OSの扱い）

- macOS / Linux は **機能的には対応**するが、MVPの性能受け入れ基準（Pass/Fail）は **上記Windows環境** を主判定とする
  （他OSはベストエフォートで継続最適化）

---

## 2. 閲覧データ削除（MVP仕様確定）

### 2.1 MVPで提供する操作

- メニュー or 設定画面から **「閲覧データを削除」** が実行できる
- MVPは **“まとめて削除（ワンクリック）”** を必須とし、将来 **選択式（チェックボックス）** を追加する

### 2.2 MVPで削除対象に含めるデータ（明示）

ユーザー要望の「履歴+Cookie+キャッシュ等」を、実装・期待値ブレ防止のため **具体的に定義**します。

**削除対象（MVPで必須）**

- 履歴（閲覧履歴）
- Cookie（ログイン状態等を含む）
- キャッシュ（HTTPキャッシュ / 画像・JSなど）
- サイトデータ（以下を含む扱い）
  - localStorage / sessionStorage
  - IndexedDB
  - Service Worker / Cache Storage（PWA系のキャッシュ）

**削除対象（MVPでは任意、将来オプション化しやすい）**

- ダウンロード履歴（※DLした“ファイル本体”は削除しない）
- 保存したパスワード（OSキーチェーン連携の場合、削除UIは後回しでも良い）
- サイト権限（通知/カメラ/マイク等）

> MVPでは「まとめて削除」が主目的なので、**上の“必須セット”を確実に消す**のが要件の核です。

### 2.3 削除後の期待挙動（受け入れ条件）

- 削除後、主要サイト（Gmail/ChatGPT等）は **ログアウト状態**になる（Cookie消去の結果）
- 次回起動時のセッション復元は、仕様としてどちらかに固定（推奨は下）
  - **推奨**：削除実行時に「次回は空セッションで起動」（復元情報も消える）
  - 代案：復元は維持する（ただしCookieが消えるので多くのタブは未ログインで復元）

---

## 3. 受け入れ基準（Acceptance Criteria）更新

### 3.1 性能（Windows基準環境で判定）

- [ ] **コールド起動 2秒以内**
- [ ] 空タブ **200MB以下**
- [ ] ベンチ10サイト同時（google/youtube/wikipedia/github/gmail/chatgpt/gemini/reddit/note/x）で **600MB以下**

#### 測定条件（ブレ防止のための前提）

- 10サイトは **ログアウト状態**（またはログイン不要ページ）で統一
  ※ログイン状態だと個人環境差で計測が揺れるため、MVPの性能判定には不向き

### 3.2 機能（データ削除）

- [ ] **「閲覧データを削除」** が実行できる
- [ ] 実行後に **履歴が空**、Cookie/サイトデータが消えていることが確認できる
- [ ] 実行後もアプリはクラッシュせず、通常閲覧ができる

---

## 4. 次に設計へ落とすための“実装上の決め” 2点（提案）

質問というより、仕様の空白を埋める提案です。反対ならその場で変えます。

1. **データ削除のUI配置**

- 設定 → プライバシー → 「閲覧データを削除」
  - ショートカット候補：`Ctrl+Shift+Del`（一般的で学習コストが低い）

2. **削除の粒度（将来オプション）**

- 将来のチェックボックス案（v1以降）
  - 履歴 / Cookie / キャッシュ / サイトデータ / ダウンロード履歴 / 権限 / 保存パスワード

- MVPは **「すべて削除」だけ** で良い（あなたの要望に一致）
